{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createBridgingHeaderFile = createBridgingHeaderFile;\nexports.ensureSwiftBridgingHeaderSetup = ensureSwiftBridgingHeaderSetup;\nexports.getDesignatedSwiftBridgingHeaderFileReference = getDesignatedSwiftBridgingHeaderFileReference;\nexports.linkBridgingHeaderFile = linkBridgingHeaderFile;\nexports.withSwiftBridgingHeader = exports.withNoopSwiftFile = void 0;\nfunction _fs() {\n  var data = _interopRequireDefault(require(\"fs\"));\n  _fs = function _fs() {\n    return data;\n  };\n  return data;\n}\nfunction _path() {\n  var data = _interopRequireDefault(require(\"path\"));\n  _path = function _path() {\n    return data;\n  };\n  return data;\n}\nfunction _iosPlugins() {\n  var data = require(\"../plugins/ios-plugins\");\n  _iosPlugins = function _iosPlugins() {\n    return data;\n  };\n  return data;\n}\nfunction _Paths() {\n  var data = require(\"./Paths\");\n  _Paths = function _Paths() {\n    return data;\n  };\n  return data;\n}\nfunction _XcodeProjectFile() {\n  var data = require(\"./XcodeProjectFile\");\n  _XcodeProjectFile = function _XcodeProjectFile() {\n    return data;\n  };\n  return data;\n}\nfunction _Xcodeproj() {\n  var data = require(\"./utils/Xcodeproj\");\n  _Xcodeproj = function _Xcodeproj() {\n    return data;\n  };\n  return data;\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar templateBridgingHeader = `//\n//  Use this file to import your target's public headers that you would like to expose to Swift.\n//\n`;\nvar withSwiftBridgingHeader = function withSwiftBridgingHeader(config) {\n  return (0, _iosPlugins().withXcodeProject)(config, function (config) {\n    config.modResults = ensureSwiftBridgingHeaderSetup({\n      project: config.modResults,\n      projectRoot: config.modRequest.projectRoot\n    });\n    return config;\n  });\n};\nexports.withSwiftBridgingHeader = withSwiftBridgingHeader;\nfunction ensureSwiftBridgingHeaderSetup(_ref) {\n  var projectRoot = _ref.projectRoot,\n    project = _ref.project;\n  if (shouldCreateSwiftBridgingHeader({\n    projectRoot: projectRoot,\n    project: project\n  })) {\n    var projectName = (0, _Xcodeproj().getProjectName)(projectRoot);\n    var bridgingHeader = createBridgingHeaderFileName(projectName);\n    project = createBridgingHeaderFile({\n      project: project,\n      projectName: projectName,\n      projectRoot: projectRoot,\n      bridgingHeader: bridgingHeader\n    });\n    project = linkBridgingHeaderFile({\n      project: project,\n      bridgingHeader: _path().default.join(projectName, bridgingHeader)\n    });\n  }\n  return project;\n}\nfunction shouldCreateSwiftBridgingHeader(_ref2) {\n  var projectRoot = _ref2.projectRoot,\n    project = _ref2.project;\n  var isObjc = (0, _Paths().getAppDelegate)(projectRoot).language !== 'swift';\n  return isObjc && !getDesignatedSwiftBridgingHeaderFileReference({\n    project: project\n  });\n}\nfunction createBridgingHeaderFileName(projectName) {\n  return `${projectName}-Bridging-Header.h`;\n}\nfunction getDesignatedSwiftBridgingHeaderFileReference(_ref3) {\n  var project = _ref3.project;\n  var configurations = project.pbxXCBuildConfigurationSection();\n  for (var _ref4 of Object.values(configurations || {})) {\n    var buildSettings = _ref4.buildSettings;\n    if (typeof (buildSettings === null || buildSettings === void 0 ? void 0 : buildSettings.PRODUCT_NAME) !== 'undefined') {\n      if (typeof buildSettings.SWIFT_OBJC_BRIDGING_HEADER === 'string' && buildSettings.SWIFT_OBJC_BRIDGING_HEADER) {\n        return buildSettings.SWIFT_OBJC_BRIDGING_HEADER;\n      }\n    }\n  }\n  return null;\n}\nfunction linkBridgingHeaderFile(_ref5) {\n  var project = _ref5.project,\n    bridgingHeader = _ref5.bridgingHeader;\n  var configurations = project.pbxXCBuildConfigurationSection();\n  for (var _ref6 of Object.values(configurations || {})) {\n    var buildSettings = _ref6.buildSettings;\n    if (typeof (buildSettings === null || buildSettings === void 0 ? void 0 : buildSettings.PRODUCT_NAME) !== 'undefined') {\n      buildSettings.SWIFT_OBJC_BRIDGING_HEADER = bridgingHeader;\n    }\n  }\n  return project;\n}\nfunction createBridgingHeaderFile(_ref7) {\n  var projectRoot = _ref7.projectRoot,\n    projectName = _ref7.projectName,\n    project = _ref7.project,\n    bridgingHeader = _ref7.bridgingHeader;\n  var bridgingHeaderProjectPath = _path().default.join((0, _Paths().getSourceRoot)(projectRoot), bridgingHeader);\n  if (!_fs().default.existsSync(bridgingHeaderProjectPath)) {\n    _fs().default.writeFileSync(bridgingHeaderProjectPath, templateBridgingHeader, 'utf8');\n  }\n  var filePath = `${projectName}/${bridgingHeader}`;\n  if (!project.hasFile(filePath)) {\n    project = (0, _Xcodeproj().addResourceFileToGroup)({\n      filepath: filePath,\n      groupName: projectName,\n      project: project,\n      isBuildFile: false,\n      verbose: false\n    });\n  }\n  return project;\n}\nvar withNoopSwiftFile = function withNoopSwiftFile(config) {\n  return (0, _XcodeProjectFile().withBuildSourceFile)(config, {\n    filePath: 'noop-file.swift',\n    contents: ['//', '// @generated', '// A blank Swift file must be created for native modules with Swift files to work correctly.', '//', ''].join('\\n')\n  });\n};\nexports.withNoopSwiftFile = withNoopSwiftFile;","map":{"version":3,"names":["_fs","data","_interopRequireDefault","require","_path","_iosPlugins","_Paths","_XcodeProjectFile","_Xcodeproj","obj","__esModule","default","templateBridgingHeader","withSwiftBridgingHeader","config","withXcodeProject","modResults","ensureSwiftBridgingHeaderSetup","project","projectRoot","modRequest","exports","_ref","shouldCreateSwiftBridgingHeader","projectName","getProjectName","bridgingHeader","createBridgingHeaderFileName","createBridgingHeaderFile","linkBridgingHeaderFile","join","_ref2","isObjc","getAppDelegate","language","getDesignatedSwiftBridgingHeaderFileReference","_ref3","configurations","pbxXCBuildConfigurationSection","_ref4","Object","values","buildSettings","PRODUCT_NAME","SWIFT_OBJC_BRIDGING_HEADER","_ref5","_ref6","_ref7","bridgingHeaderProjectPath","getSourceRoot","existsSync","writeFileSync","filePath","hasFile","addResourceFileToGroup","filepath","groupName","isBuildFile","verbose","withNoopSwiftFile","withBuildSourceFile","contents"],"sources":["C:\\Users\\CR Laptop\\Desktop\\rn-project\\react_navigation\\node_modules\\@expo\\config-plugins\\src\\ios\\Swift.ts"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\nimport { ConfigPlugin, XcodeProject } from '../Plugin.types';\nimport { withXcodeProject } from '../plugins/ios-plugins';\nimport { getAppDelegate, getSourceRoot } from './Paths';\nimport { withBuildSourceFile } from './XcodeProjectFile';\nimport { addResourceFileToGroup, getProjectName } from './utils/Xcodeproj';\n\nconst templateBridgingHeader = `//\n//  Use this file to import your target's public headers that you would like to expose to Swift.\n//\n`;\n\n/**\n * Ensure a Swift bridging header is created for the project.\n * This helps fix problems related to using modules that are written in Swift (lottie, FBSDK).\n *\n * 1. Ensures the file exists given the project path.\n * 2. Writes the file and links to Xcode as a resource file.\n * 3. Sets the build configuration `SWIFT_OBJC_BRIDGING_HEADER = [PROJECT_NAME]-Bridging-Header.h`\n */\nexport const withSwiftBridgingHeader: ConfigPlugin = (config) => {\n  return withXcodeProject(config, (config) => {\n    config.modResults = ensureSwiftBridgingHeaderSetup({\n      project: config.modResults,\n      projectRoot: config.modRequest.projectRoot,\n    });\n    return config;\n  });\n};\n\nexport function ensureSwiftBridgingHeaderSetup({\n  projectRoot,\n  project,\n}: {\n  projectRoot: string;\n  project: XcodeProject;\n}) {\n  // Only create a bridging header if using objective-c\n  if (shouldCreateSwiftBridgingHeader({ projectRoot, project })) {\n    const projectName = getProjectName(projectRoot);\n    const bridgingHeader = createBridgingHeaderFileName(projectName);\n    // Ensure a bridging header is created in the Xcode project.\n    project = createBridgingHeaderFile({\n      project,\n      projectName,\n      projectRoot,\n      bridgingHeader,\n    });\n    // Designate the newly created file as the Swift bridging header in the Xcode project.\n    project = linkBridgingHeaderFile({\n      project,\n      bridgingHeader: path.join(projectName, bridgingHeader),\n    });\n  }\n  return project;\n}\n\nfunction shouldCreateSwiftBridgingHeader({\n  projectRoot,\n  project,\n}: {\n  projectRoot: string;\n  project: XcodeProject;\n}): boolean {\n  // Only create a bridging header if the project is using in Objective C (AppDelegate is written in Objc).\n  const isObjc = getAppDelegate(projectRoot).language !== 'swift';\n  return isObjc && !getDesignatedSwiftBridgingHeaderFileReference({ project });\n}\n\n/**\n * @returns String matching the default name used when Xcode automatically creates a bridging header file.\n */\nfunction createBridgingHeaderFileName(projectName: string): string {\n  return `${projectName}-Bridging-Header.h`;\n}\n\nexport function getDesignatedSwiftBridgingHeaderFileReference({\n  project,\n}: {\n  project: XcodeProject;\n}): string | null {\n  const configurations = project.pbxXCBuildConfigurationSection();\n  // @ts-ignore\n  for (const { buildSettings } of Object.values(configurations || {})) {\n    // Guessing that this is the best way to emulate Xcode.\n    // Using `project.addToBuildSettings` modifies too many targets.\n    if (typeof buildSettings?.PRODUCT_NAME !== 'undefined') {\n      if (\n        typeof buildSettings.SWIFT_OBJC_BRIDGING_HEADER === 'string' &&\n        buildSettings.SWIFT_OBJC_BRIDGING_HEADER\n      ) {\n        return buildSettings.SWIFT_OBJC_BRIDGING_HEADER;\n      }\n    }\n  }\n  return null;\n}\n\n/**\n *\n * @param bridgingHeader The bridging header filename ex: `ExpoAPIs-Bridging-Header.h`\n * @returns\n */\nexport function linkBridgingHeaderFile({\n  project,\n  bridgingHeader,\n}: {\n  project: XcodeProject;\n  bridgingHeader: string;\n}): XcodeProject {\n  const configurations = project.pbxXCBuildConfigurationSection();\n  // @ts-ignore\n  for (const { buildSettings } of Object.values(configurations || {})) {\n    // Guessing that this is the best way to emulate Xcode.\n    // Using `project.addToBuildSettings` modifies too many targets.\n    if (typeof buildSettings?.PRODUCT_NAME !== 'undefined') {\n      buildSettings.SWIFT_OBJC_BRIDGING_HEADER = bridgingHeader;\n    }\n  }\n\n  return project;\n}\n\nexport function createBridgingHeaderFile({\n  projectRoot,\n  projectName,\n  project,\n  bridgingHeader,\n}: {\n  project: XcodeProject;\n  projectName: string;\n  projectRoot: string;\n  bridgingHeader: string;\n}): XcodeProject {\n  const bridgingHeaderProjectPath = path.join(getSourceRoot(projectRoot), bridgingHeader);\n  if (!fs.existsSync(bridgingHeaderProjectPath)) {\n    // Create the file\n    fs.writeFileSync(bridgingHeaderProjectPath, templateBridgingHeader, 'utf8');\n  }\n\n  // This is non-standard, Xcode generates the bridging header in `/ios` which is kinda annoying.\n  // Instead, this'll generate the default header in the application code folder `/ios/myproject/`.\n  const filePath = `${projectName}/${bridgingHeader}`;\n  // Ensure the file is linked with Xcode resource files\n  if (!project.hasFile(filePath)) {\n    project = addResourceFileToGroup({\n      filepath: filePath,\n      groupName: projectName,\n      project,\n      // Not sure why, but this is how Xcode generates it.\n      isBuildFile: false,\n      verbose: false,\n    });\n  }\n  return project;\n}\n\nexport const withNoopSwiftFile: ConfigPlugin = (config) => {\n  return withBuildSourceFile(config, {\n    filePath: 'noop-file.swift',\n    contents: [\n      '//',\n      '// @generated',\n      '// A blank Swift file must be created for native modules with Swift files to work correctly.',\n      '//',\n      '',\n    ].join('\\n'),\n  });\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}