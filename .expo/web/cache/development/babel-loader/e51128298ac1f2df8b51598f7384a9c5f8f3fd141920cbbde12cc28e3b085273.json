{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { DEFAULT_TOUCH_SLOP } from \"../constants\";\nimport { EventTypes } from \"../interfaces\";\nvar ScaleGestureDetector = function () {\n  function ScaleGestureDetector(callbacks) {\n    _classCallCheck(this, ScaleGestureDetector);\n    this.inProgress = false;\n    this.onScaleBegin = callbacks.onScaleBegin;\n    this.onScale = callbacks.onScale;\n    this.onScaleEnd = callbacks.onScaleEnd;\n    this.spanSlop = DEFAULT_TOUCH_SLOP * 2;\n    this.minSpan = 0;\n  }\n  _createClass(ScaleGestureDetector, [{\n    key: \"onTouchEvent\",\n    value: function onTouchEvent(event, tracker) {\n      this.currentTime = event.time;\n      var action = event.eventType;\n      var numOfPointers = tracker.getTrackedPointersCount();\n      var streamComplete = action === EventTypes.UP || action === EventTypes.ADDITIONAL_POINTER_UP || action === EventTypes.CANCEL;\n      if (action === EventTypes.DOWN || streamComplete) {\n        if (this.inProgress) {\n          this.onScaleEnd(this);\n          this.inProgress = false;\n          this.initialSpan = 0;\n        }\n        if (streamComplete) {\n          return true;\n        }\n      }\n      var configChanged = action === EventTypes.DOWN || action === EventTypes.ADDITIONAL_POINTER_UP || action === EventTypes.ADDITIONAL_POINTER_DOWN;\n      var pointerUp = action === EventTypes.ADDITIONAL_POINTER_UP;\n      var ignoredPointer = pointerUp ? event.pointerId : undefined;\n      var div = pointerUp ? numOfPointers - 1 : numOfPointers;\n      var sumX = tracker.getSumX(ignoredPointer);\n      var sumY = tracker.getSumY(ignoredPointer);\n      var focusX = sumX / div;\n      var focusY = sumY / div;\n      var devSumX = 0;\n      var devSumY = 0;\n      tracker.getData().forEach(function (value, key) {\n        if (key === ignoredPointer) {\n          return;\n        }\n        devSumX += Math.abs(value.lastX - focusX);\n        devSumY += Math.abs(value.lastY - focusY);\n      });\n      var devX = devSumX / div;\n      var devY = devSumY / div;\n      var spanX = devX * 2;\n      var spanY = devY * 2;\n      var span = Math.hypot(spanX, spanY);\n      var wasInProgress = this.inProgress;\n      this.focusX = focusX;\n      this.focusY = focusY;\n      if (this.inProgress && (span < this.minSpan || configChanged)) {\n        this.onScaleEnd(this);\n        this.inProgress = false;\n        this.initialSpan = span;\n      }\n      if (configChanged) {\n        this.initialSpan = this.prevSpan = this.currentSpan = span;\n      }\n      if (!this.inProgress && span >= this.minSpan && (wasInProgress || Math.abs(span - this.initialSpan) > this.spanSlop)) {\n        this.prevSpan = this.currentSpan = span;\n        this.prevTime = this.currentTime;\n        this.inProgress = this.onScaleBegin(this);\n      }\n      if (action !== EventTypes.MOVE) {\n        return true;\n      }\n      this.currentSpan = span;\n      if (this.inProgress && !this.onScale(this)) {\n        return true;\n      }\n      this.prevSpan = this.currentSpan;\n      this.prevTime = this.currentTime;\n      return true;\n    }\n  }, {\n    key: \"getCurrentSpan\",\n    value: function getCurrentSpan() {\n      return this.currentSpan;\n    }\n  }, {\n    key: \"getFocusX\",\n    value: function getFocusX() {\n      return this.focusX;\n    }\n  }, {\n    key: \"getFocusY\",\n    value: function getFocusY() {\n      return this.focusY;\n    }\n  }, {\n    key: \"getTimeDelta\",\n    value: function getTimeDelta() {\n      return this.currentTime - this.prevTime;\n    }\n  }, {\n    key: \"getScaleFactor\",\n    value: function getScaleFactor(numOfPointers) {\n      if (numOfPointers < 2) {\n        return 1;\n      }\n      return this.prevSpan > 0 ? this.currentSpan / this.prevSpan : 1;\n    }\n  }]);\n  return ScaleGestureDetector;\n}();\nexport { ScaleGestureDetector as default };","map":{"version":3,"names":["DEFAULT_TOUCH_SLOP","EventTypes","ScaleGestureDetector","callbacks","_classCallCheck","inProgress","onScaleBegin","onScale","onScaleEnd","spanSlop","minSpan","_createClass","key","value","onTouchEvent","event","tracker","currentTime","time","action","eventType","numOfPointers","getTrackedPointersCount","streamComplete","UP","ADDITIONAL_POINTER_UP","CANCEL","DOWN","initialSpan","configChanged","ADDITIONAL_POINTER_DOWN","pointerUp","ignoredPointer","pointerId","undefined","div","sumX","getSumX","sumY","getSumY","focusX","focusY","devSumX","devSumY","getData","forEach","Math","abs","lastX","lastY","devX","devY","spanX","spanY","span","hypot","wasInProgress","prevSpan","currentSpan","prevTime","MOVE","getCurrentSpan","getFocusX","getFocusY","getTimeDelta","getScaleFactor","default"],"sources":["C:/Users/CR Laptop/Desktop/rn-project/react_navigation/node_modules/react-native-gesture-handler/src/web/detectors/ScaleGestureDetector.ts"],"sourcesContent":["import { DEFAULT_TOUCH_SLOP } from '../constants';\nimport { AdaptedEvent, EventTypes } from '../interfaces';\n\nimport PointerTracker from '../tools/PointerTracker';\n\nexport interface ScaleGestureListener {\n  onScaleBegin: (detector: ScaleGestureDetector) => boolean;\n  onScale: (detector: ScaleGestureDetector) => boolean;\n  onScaleEnd: (detector: ScaleGestureDetector) => void;\n}\n\nexport default class ScaleGestureDetector implements ScaleGestureListener {\n  public onScaleBegin: (detector: ScaleGestureDetector) => boolean;\n  public onScale: (detector: ScaleGestureDetector) => boolean;\n  public onScaleEnd: (detector: ScaleGestureDetector) => void;\n\n  private focusX!: number;\n  private focusY!: number;\n\n  private currentSpan!: number;\n  private prevSpan!: number;\n  private initialSpan!: number;\n\n  private currentTime!: number;\n  private prevTime!: number;\n\n  private inProgress = false;\n\n  private spanSlop: number;\n  private minSpan: number;\n\n  public constructor(callbacks: ScaleGestureListener) {\n    this.onScaleBegin = callbacks.onScaleBegin;\n    this.onScale = callbacks.onScale;\n    this.onScaleEnd = callbacks.onScaleEnd;\n\n    this.spanSlop = DEFAULT_TOUCH_SLOP * 2;\n    this.minSpan = 0;\n  }\n\n  public onTouchEvent(event: AdaptedEvent, tracker: PointerTracker): boolean {\n    this.currentTime = event.time;\n\n    const action: EventTypes = event.eventType;\n    const numOfPointers = tracker.getTrackedPointersCount();\n\n    const streamComplete: boolean =\n      action === EventTypes.UP ||\n      action === EventTypes.ADDITIONAL_POINTER_UP ||\n      action === EventTypes.CANCEL;\n\n    if (action === EventTypes.DOWN || streamComplete) {\n      if (this.inProgress) {\n        this.onScaleEnd(this);\n        this.inProgress = false;\n        this.initialSpan = 0;\n      }\n\n      if (streamComplete) {\n        return true;\n      }\n    }\n\n    const configChanged: boolean =\n      action === EventTypes.DOWN ||\n      action === EventTypes.ADDITIONAL_POINTER_UP ||\n      action === EventTypes.ADDITIONAL_POINTER_DOWN;\n\n    const pointerUp = action === EventTypes.ADDITIONAL_POINTER_UP;\n\n    const ignoredPointer: number | undefined = pointerUp\n      ? event.pointerId\n      : undefined;\n\n    //Determine focal point\n\n    const div: number = pointerUp ? numOfPointers - 1 : numOfPointers;\n\n    const sumX = tracker.getSumX(ignoredPointer);\n    const sumY = tracker.getSumY(ignoredPointer);\n\n    const focusX = sumX / div;\n    const focusY = sumY / div;\n\n    //Determine average deviation from focal point\n\n    let devSumX = 0;\n    let devSumY = 0;\n\n    tracker.getData().forEach((value, key) => {\n      if (key === ignoredPointer) {\n        return;\n      }\n\n      devSumX += Math.abs(value.lastX - focusX);\n      devSumY += Math.abs(value.lastY - focusY);\n    });\n\n    const devX: number = devSumX / div;\n    const devY: number = devSumY / div;\n\n    const spanX: number = devX * 2;\n    const spanY: number = devY * 2;\n\n    const span = Math.hypot(spanX, spanY);\n\n    //Begin/end events\n    const wasInProgress: boolean = this.inProgress;\n    this.focusX = focusX;\n    this.focusY = focusY;\n\n    if (this.inProgress && (span < this.minSpan || configChanged)) {\n      this.onScaleEnd(this);\n      this.inProgress = false;\n      this.initialSpan = span;\n    }\n\n    if (configChanged) {\n      this.initialSpan = this.prevSpan = this.currentSpan = span;\n    }\n\n    if (\n      !this.inProgress &&\n      span >= this.minSpan &&\n      (wasInProgress || Math.abs(span - this.initialSpan) > this.spanSlop)\n    ) {\n      this.prevSpan = this.currentSpan = span;\n      this.prevTime = this.currentTime;\n      this.inProgress = this.onScaleBegin(this);\n    }\n\n    //Handle motion\n    if (action !== EventTypes.MOVE) {\n      return true;\n    }\n\n    this.currentSpan = span;\n\n    if (this.inProgress && !this.onScale(this)) {\n      return true;\n    }\n\n    this.prevSpan = this.currentSpan;\n    this.prevTime = this.currentTime;\n\n    return true;\n  }\n\n  public getCurrentSpan(): number {\n    return this.currentSpan;\n  }\n\n  public getFocusX(): number {\n    return this.focusX;\n  }\n\n  public getFocusY(): number {\n    return this.focusY;\n  }\n\n  public getTimeDelta(): number {\n    return this.currentTime - this.prevTime;\n  }\n\n  public getScaleFactor(numOfPointers: number): number {\n    if (numOfPointers < 2) {\n      return 1;\n    }\n\n    return this.prevSpan > 0 ? this.currentSpan / this.prevSpan : 1;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}