{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setProvisioningProfileForPbxproj = setProvisioningProfileForPbxproj;\nfunction _fs() {\n  var data = _interopRequireDefault(require(\"fs\"));\n  _fs = function _fs() {\n    return data;\n  };\n  return data;\n}\nfunction _Target() {\n  var data = require(\"./Target\");\n  _Target = function _Target() {\n    return data;\n  };\n  return data;\n}\nfunction _Xcodeproj() {\n  var data = require(\"./utils/Xcodeproj\");\n  _Xcodeproj = function _Xcodeproj() {\n    return data;\n  };\n  return data;\n}\nfunction _string() {\n  var data = require(\"./utils/string\");\n  _string = function _string() {\n    return data;\n  };\n  return data;\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction setProvisioningProfileForPbxproj(projectRoot, _ref) {\n  var targetName = _ref.targetName,\n    profileName = _ref.profileName,\n    appleTeamId = _ref.appleTeamId,\n    _ref$buildConfigurati = _ref.buildConfiguration,\n    buildConfiguration = _ref$buildConfigurati === void 0 ? 'Release' : _ref$buildConfigurati;\n  var project = (0, _Xcodeproj().getPbxproj)(projectRoot);\n  var nativeTargetEntry = targetName ? (0, _Target().findNativeTargetByName)(project, targetName) : (0, _Target().findFirstNativeTarget)(project);\n  var _nativeTargetEntry = _slicedToArray(nativeTargetEntry, 2),\n    nativeTargetId = _nativeTargetEntry[0],\n    nativeTarget = _nativeTargetEntry[1];\n  var quotedAppleTeamId = ensureQuotes(appleTeamId);\n  (0, _Xcodeproj().getBuildConfigurationsForListId)(project, nativeTarget.buildConfigurationList).filter(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n      item = _ref3[1];\n    return (0, _string().trimQuotes)(item.name) === buildConfiguration;\n  }).forEach(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      item = _ref5[1];\n    item.buildSettings.PROVISIONING_PROFILE_SPECIFIER = `\"${profileName}\"`;\n    item.buildSettings.DEVELOPMENT_TEAM = quotedAppleTeamId;\n    item.buildSettings.CODE_SIGN_IDENTITY = '\"iPhone Distribution\"';\n    item.buildSettings.CODE_SIGN_STYLE = 'Manual';\n  });\n  Object.entries((0, _Xcodeproj().getProjectSection)(project)).filter(_Xcodeproj().isNotComment).forEach(function (_ref6) {\n    var _ref7 = _slicedToArray(_ref6, 2),\n      item = _ref7[1];\n    if (!item.attributes.TargetAttributes[nativeTargetId]) {\n      item.attributes.TargetAttributes[nativeTargetId] = {};\n    }\n    item.attributes.TargetAttributes[nativeTargetId].DevelopmentTeam = quotedAppleTeamId;\n    item.attributes.TargetAttributes[nativeTargetId].ProvisioningStyle = 'Manual';\n  });\n  _fs().default.writeFileSync(project.filepath, project.writeSync());\n}\nvar ensureQuotes = function ensureQuotes(value) {\n  if (!value.match(/^['\"]/)) {\n    return `\"${value}\"`;\n  }\n  return value;\n};","map":{"version":3,"names":["_fs","data","_interopRequireDefault","require","_Target","_Xcodeproj","_string","obj","__esModule","default","setProvisioningProfileForPbxproj","projectRoot","_ref","targetName","profileName","appleTeamId","_ref$buildConfigurati","buildConfiguration","project","getPbxproj","nativeTargetEntry","findNativeTargetByName","findFirstNativeTarget","_nativeTargetEntry","_slicedToArray","nativeTargetId","nativeTarget","quotedAppleTeamId","ensureQuotes","getBuildConfigurationsForListId","buildConfigurationList","filter","_ref2","_ref3","item","trimQuotes","name","forEach","_ref4","_ref5","buildSettings","PROVISIONING_PROFILE_SPECIFIER","DEVELOPMENT_TEAM","CODE_SIGN_IDENTITY","CODE_SIGN_STYLE","Object","entries","getProjectSection","isNotComment","_ref6","_ref7","attributes","TargetAttributes","DevelopmentTeam","ProvisioningStyle","writeFileSync","filepath","writeSync","value","match"],"sources":["C:\\Users\\CR Laptop\\Desktop\\rn-project\\react_navigation\\node_modules\\@expo\\config-plugins\\src\\ios\\ProvisioningProfile.ts"],"sourcesContent":["import fs from 'fs';\n\nimport { findFirstNativeTarget, findNativeTargetByName } from './Target';\nimport {\n  ConfigurationSectionEntry,\n  getBuildConfigurationsForListId,\n  getPbxproj,\n  getProjectSection,\n  isNotComment,\n  ProjectSectionEntry,\n} from './utils/Xcodeproj';\nimport { trimQuotes } from './utils/string';\n\ntype ProvisioningProfileSettings = {\n  targetName?: string;\n  appleTeamId: string;\n  profileName: string;\n  buildConfiguration?: string;\n};\n\nexport function setProvisioningProfileForPbxproj(\n  projectRoot: string,\n  {\n    targetName,\n    profileName,\n    appleTeamId,\n    buildConfiguration = 'Release',\n  }: ProvisioningProfileSettings\n): void {\n  const project = getPbxproj(projectRoot);\n\n  const nativeTargetEntry = targetName\n    ? findNativeTargetByName(project, targetName)\n    : findFirstNativeTarget(project);\n  const [nativeTargetId, nativeTarget] = nativeTargetEntry;\n\n  const quotedAppleTeamId = ensureQuotes(appleTeamId);\n\n  getBuildConfigurationsForListId(project, nativeTarget.buildConfigurationList)\n    .filter(([, item]: ConfigurationSectionEntry) => trimQuotes(item.name) === buildConfiguration)\n    .forEach(([, item]: ConfigurationSectionEntry) => {\n      item.buildSettings.PROVISIONING_PROFILE_SPECIFIER = `\"${profileName}\"`;\n      item.buildSettings.DEVELOPMENT_TEAM = quotedAppleTeamId;\n      item.buildSettings.CODE_SIGN_IDENTITY = '\"iPhone Distribution\"';\n      item.buildSettings.CODE_SIGN_STYLE = 'Manual';\n    });\n\n  Object.entries(getProjectSection(project))\n    .filter(isNotComment)\n    .forEach(([, item]: ProjectSectionEntry) => {\n      if (!item.attributes.TargetAttributes[nativeTargetId]) {\n        item.attributes.TargetAttributes[nativeTargetId] = {};\n      }\n      item.attributes.TargetAttributes[nativeTargetId].DevelopmentTeam = quotedAppleTeamId;\n      item.attributes.TargetAttributes[nativeTargetId].ProvisioningStyle = 'Manual';\n    });\n\n  fs.writeFileSync(project.filepath, project.writeSync());\n}\n\nconst ensureQuotes = (value: string) => {\n  if (!value.match(/^['\"]/)) {\n    return `\"${value}\"`;\n  }\n  return value;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}