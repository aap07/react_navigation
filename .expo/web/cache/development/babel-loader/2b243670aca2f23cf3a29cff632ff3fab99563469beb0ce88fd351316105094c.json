{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getNpmProxy = exports.isYarnOfflineAsync = void 0;\nvar child_process_1 = require(\"child_process\");\nvar dns_1 = __importDefault(require(\"dns\"));\nvar url_1 = __importDefault(require(\"url\"));\nfunction isYarnOfflineAsync() {\n  return _isYarnOfflineAsync.apply(this, arguments);\n}\nfunction _isYarnOfflineAsync() {\n  _isYarnOfflineAsync = _asyncToGenerator(function* () {\n    if (yield isUrlAvailableAsync('registry.yarnpkg.com')) {\n      return false;\n    }\n    var proxy = getNpmProxy();\n    if (!proxy) {\n      return true;\n    }\n    var _url_1$default$parse = url_1.default.parse(proxy),\n      hostname = _url_1$default$parse.hostname;\n    if (!hostname) {\n      return true;\n    }\n    return !(yield isUrlAvailableAsync(hostname));\n  });\n  return _isYarnOfflineAsync.apply(this, arguments);\n}\nexports.isYarnOfflineAsync = isYarnOfflineAsync;\nfunction getNpmProxy() {\n  if (process.env.https_proxy) {\n    var _process$env$https_pr;\n    return (_process$env$https_pr = process.env.https_proxy) != null ? _process$env$https_pr : null;\n  }\n  try {\n    var httpsProxy = (0, child_process_1.execSync)('npm config get https-proxy').toString().trim();\n    return httpsProxy !== 'null' ? httpsProxy : null;\n  } catch (_unused) {\n    return null;\n  }\n}\nexports.getNpmProxy = getNpmProxy;\nfunction isUrlAvailableAsync(url) {\n  return new Promise(function (resolve) {\n    dns_1.default.lookup(url, function (err) {\n      resolve(!err);\n    });\n  });\n}","map":{"version":3,"names":["child_process_1","require","dns_1","__importDefault","url_1","isYarnOfflineAsync","_isYarnOfflineAsync","apply","arguments","_asyncToGenerator","isUrlAvailableAsync","proxy","getNpmProxy","_url_1$default$parse","default","parse","hostname","exports","process","env","https_proxy","_process$env$https_pr","httpsProxy","execSync","toString","trim","_unused","url","Promise","resolve","lookup","err"],"sources":["../../src/utils/yarn.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;AAAA,IAAAA,eAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAC,eAAA,CAAAF,OAAA;AACA,IAAAG,KAAA,GAAAD,eAAA,CAAAF,OAAA;AAAsB,SAGAI,kBAAkBA,CAAA;EAAA,OAAAC,mBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,oBAAA;EAAAA,mBAAA,GAAAG,iBAAA,CAAjC,aAAiC;IACtC,UAAUC,mBAAmB,CAAC,sBAAsB,CAAC,EAAE;MACrD,OAAO,KAAK;;IAGd,IAAMC,KAAK,GAAGC,WAAW,EAAE;IAE3B,IAAI,CAACD,KAAK,EAAE;MACV,OAAO,IAAI;;IAGb,IAAAE,oBAAA,GAAqBT,KAAA,CAAAU,OAAG,CAACC,KAAK,CAACJ,KAAK,CAAC;MAA7BK,QAAQ,GAAAH,oBAAA,CAARG,QAAQ;IAChB,IAAI,CAACA,QAAQ,EAAE;MACb,OAAO,IAAI;;IAGb,OAAO,QAAQN,mBAAmB,CAACM,QAAQ,CAAC,CAAC;EAC/C,CAAC;EAAA,OAAAV,mBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAjBDS,OAAA,CAAAZ,kBAAA,GAAAA,kBAAA;AAoBA,SAAgBO,WAAWA,CAAA;EACzB,IAAIM,OAAO,CAACC,GAAG,CAACC,WAAW,EAAE;IAAA,IAAAC,qBAAA;IAC3B,QAAAA,qBAAA,GAAOH,OAAO,CAACC,GAAG,CAACC,WAAW,YAAAC,qBAAA,GAAI,IAAI;;EAGxC,IAAI;IACF,IAAMC,UAAU,GAAG,IAAAtB,eAAA,CAAAuB,QAAQ,EAAC,4BAA4B,CAAC,CAACC,QAAQ,EAAE,CAACC,IAAI,EAAE;IAC3E,OAAOH,UAAU,KAAK,MAAM,GAAGA,UAAU,GAAG,IAAI;GACjD,CAAC,OAAAI,OAAA,EAAM;IACN,OAAO,IAAI;;AAEf;AAXAT,OAAA,CAAAL,WAAA,GAAAA,WAAA;AAaA,SAASF,mBAAmBA,CAACiB,GAAW;EACtC,OAAO,IAAIC,OAAO,CAAU,UAACC,OAAO,EAAI;IACtC3B,KAAA,CAAAY,OAAG,CAACgB,MAAM,CAACH,GAAG,EAAE,UAACI,GAAG,EAAI;MACtBF,OAAO,CAAC,CAACE,GAAG,CAAC;IACf,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"script","externalDependencies":[]}