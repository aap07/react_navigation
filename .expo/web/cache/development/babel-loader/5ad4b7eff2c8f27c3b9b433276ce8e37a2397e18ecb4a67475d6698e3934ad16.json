{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nimport { shouldBeUseWeb } from \"../PlatformChecker\";\nimport MutableValue from \"./MutableValue\";\nvar Mapper = function () {\n  function Mapper(module, mapper) {\n    var _this = this;\n    _classCallCheck(this, Mapper);\n    var inputs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    var outputs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n    _defineProperty(this, \"id\", void 0);\n    _defineProperty(this, \"inputs\", void 0);\n    _defineProperty(this, \"outputs\", void 0);\n    _defineProperty(this, \"mapper\", void 0);\n    _defineProperty(this, \"dirty\", true);\n    this.id = Mapper.MAPPER_ID++;\n    this.inputs = this.extractMutablesFromArray(inputs);\n    this.outputs = this.extractMutablesFromArray(outputs);\n    this.mapper = mapper;\n    var markDirty = function markDirty() {\n      _this.dirty = true;\n      module.maybeRequestRender();\n    };\n    this.inputs.forEach(function (input) {\n      input.addListener(markDirty);\n    });\n  }\n  _createClass(Mapper, [{\n    key: \"execute\",\n    value: function execute() {\n      this.dirty = false;\n      this.mapper();\n    }\n  }, {\n    key: \"extractMutablesFromArray\",\n    value: function extractMutablesFromArray(array) {\n      var res = [];\n      function extractMutables(value) {\n        if (value == null) {} else if (value instanceof MutableValue) {\n          res.push(value);\n        } else if (Array.isArray(value)) {\n          value.forEach(function (v) {\n            return extractMutables(v);\n          });\n        } else if (isWebDomElement(value)) {} else if (typeof value === 'object') {\n          Object.keys(value).forEach(function (key) {\n            extractMutables(value[key]);\n          });\n        }\n      }\n      extractMutables(array);\n      return res;\n    }\n  }]);\n  return Mapper;\n}();\nexport { Mapper as default };\n_defineProperty(Mapper, \"MAPPER_ID\", 1);\nfunction isWebDomElement(value) {\n  if (!shouldBeUseWeb()) {\n    return false;\n  }\n  function isWebNode(o) {\n    return typeof Node === 'object' ? o instanceof Node : o && typeof o === 'object' && typeof o.nodeType === 'number' && typeof o.nodeName === 'string';\n  }\n  function isWebElement(o) {\n    return typeof HTMLElement === 'object' ? o instanceof HTMLElement : o && typeof o === 'object' && o !== null && o.nodeType === 1 && typeof o.nodeName === 'string';\n  }\n  return isWebNode(value) || isWebElement(value);\n}","map":{"version":3,"names":["shouldBeUseWeb","MutableValue","Mapper","module","mapper","_this","_classCallCheck","inputs","arguments","length","undefined","outputs","_defineProperty","id","MAPPER_ID","extractMutablesFromArray","markDirty","dirty","maybeRequestRender","forEach","input","addListener","_createClass","key","value","execute","array","res","extractMutables","push","Array","isArray","v","isWebDomElement","Object","keys","default","isWebNode","o","Node","nodeType","nodeName","isWebElement","HTMLElement"],"sources":["C:\\Users\\CR Laptop\\Desktop\\rn-project\\react_navigation\\node_modules\\react-native-reanimated\\lib\\module\\reanimated2\\js-reanimated\\Mapper.ts"],"sourcesContent":["import { NestedObjectValues } from '../commonTypes';\nimport { shouldBeUseWeb } from '../PlatformChecker';\nimport { JSReanimated } from './commonTypes';\nimport MutableValue from './MutableValue';\n\nexport default class Mapper<T> {\n  static MAPPER_ID = 1;\n  id: number;\n  inputs: MutableValue<T>[];\n  outputs: MutableValue<T>[];\n  mapper: () => void;\n\n  dirty = true;\n\n  constructor(\n    module: JSReanimated,\n    mapper: () => void,\n    inputs: NestedObjectValues<MutableValue<T>>[] = [],\n    outputs: NestedObjectValues<MutableValue<T>>[] = []\n  ) {\n    this.id = Mapper.MAPPER_ID++;\n    this.inputs = this.extractMutablesFromArray(inputs);\n    this.outputs = this.extractMutablesFromArray(outputs);\n    this.mapper = mapper;\n\n    const markDirty = () => {\n      this.dirty = true;\n      module.maybeRequestRender();\n    };\n\n    this.inputs.forEach((input) => {\n      input.addListener(markDirty);\n    });\n  }\n\n  execute(): void {\n    this.dirty = false;\n    this.mapper();\n  }\n\n  extractMutablesFromArray<T>(\n    array: NestedObjectValues<MutableValue<T>>\n  ): MutableValue<T>[] {\n    const res: MutableValue<T>[] = [];\n\n    function extractMutables(value: NestedObjectValues<MutableValue<T>>) {\n      if (value == null) {\n        // return;\n      } else if (value instanceof MutableValue) {\n        res.push(value);\n      } else if (Array.isArray(value)) {\n        value.forEach((v) => extractMutables(v));\n      } else if (isWebDomElement(value)) {\n        // do nothing on dom elements\n        // without this check, we get a \"Maximum call size exceeded error\"\n      } else if (typeof value === 'object') {\n        Object.keys(value).forEach((key) => {\n          extractMutables(value[key]);\n        });\n      }\n    }\n\n    extractMutables(array);\n    return res;\n  }\n}\n\nfunction isWebDomElement(value: any) {\n  if (!shouldBeUseWeb()) {\n    return false;\n  }\n\n  // https://stackoverflow.com/a/384380/7869175\n  function isWebNode(o: any) {\n    return typeof Node === 'object'\n      ? o instanceof Node\n      : o &&\n          typeof o === 'object' &&\n          typeof o.nodeType === 'number' &&\n          typeof o.nodeName === 'string';\n  }\n\n  function isWebElement(o: any) {\n    return typeof HTMLElement === 'object'\n      ? o instanceof HTMLElement // DOM2\n      : o &&\n          typeof o === 'object' &&\n          o !== null &&\n          o.nodeType === 1 &&\n          typeof o.nodeName === 'string';\n  }\n\n  return isWebNode(value) || isWebElement(value);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}