{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _cacache = _interopRequireDefault(require(\"cacache\"));\nvar _stream = require(\"stream\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction getBodyAndMetaKeys(key) {\n  return [`${key}body`, `${key}meta`];\n}\nvar FileSystemCache = function () {\n  function FileSystemCache(options) {\n    _classCallCheck(this, FileSystemCache);\n    this.options = options;\n  }\n  _createClass(FileSystemCache, [{\n    key: \"get\",\n    value: function () {\n      var _get = _asyncToGenerator(function* (key) {\n        var _getBodyAndMetaKeys = getBodyAndMetaKeys(key),\n          _getBodyAndMetaKeys2 = _slicedToArray(_getBodyAndMetaKeys, 2),\n          metaKey = _getBodyAndMetaKeys2[1];\n        var metaInfo = yield _cacache.default.get.info(this.options.cacheDirectory, metaKey);\n        if (!metaInfo) {\n          return undefined;\n        }\n        var metaBuffer = yield _cacache.default.get.byDigest(this.options.cacheDirectory, metaInfo.integrity);\n        var metaData = JSON.parse(metaBuffer);\n        var bodyStreamIntegrity = metaData.bodyStreamIntegrity,\n          empty = metaData.empty,\n          expiration = metaData.expiration;\n        delete metaData.bodyStreamIntegrity;\n        delete metaData.empty;\n        delete metaData.expiration;\n        if (expiration && expiration < Date.now()) {\n          return undefined;\n        }\n        var bodyStream = empty ? _stream.Readable.from(Buffer.alloc(0)) : _cacache.default.get.stream.byDigest(this.options.cacheDirectory, bodyStreamIntegrity);\n        return {\n          bodyStream: bodyStream,\n          metaData: metaData\n        };\n      });\n      function get(_x) {\n        return _get.apply(this, arguments);\n      }\n      return get;\n    }()\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      var _getBodyAndMetaKeys3 = getBodyAndMetaKeys(key),\n        _getBodyAndMetaKeys4 = _slicedToArray(_getBodyAndMetaKeys3, 2),\n        bodyKey = _getBodyAndMetaKeys4[0],\n        metaKey = _getBodyAndMetaKeys4[1];\n      return Promise.all([_cacache.default.rm.entry(this.options.cacheDirectory, bodyKey), _cacache.default.rm.entry(this.options.cacheDirectory, metaKey)]);\n    }\n  }, {\n    key: \"set\",\n    value: function () {\n      var _set = _asyncToGenerator(function* (key, bodyStream, metaData) {\n        var _this = this;\n        var _getBodyAndMetaKeys5 = getBodyAndMetaKeys(key),\n          _getBodyAndMetaKeys6 = _slicedToArray(_getBodyAndMetaKeys5, 2),\n          bodyKey = _getBodyAndMetaKeys6[0],\n          metaKey = _getBodyAndMetaKeys6[1];\n        var metaCopy = _objectSpread({}, metaData);\n        if (typeof this.options.ttl === \"number\") {\n          metaCopy.expiration = Date.now() + this.options.ttl;\n        }\n        try {\n          metaCopy.bodyStreamIntegrity = yield new Promise(function (fulfill, reject) {\n            bodyStream.pipe(_cacache.default.put.stream(_this.options.cacheDirectory, bodyKey)).on(\"integrity\", function (i) {\n              return fulfill(i);\n            }).on(\"error\", function (e) {\n              reject(e);\n            });\n          });\n        } catch (err) {\n          if (err.code !== \"ENODATA\") {\n            throw err;\n          }\n          metaCopy.empty = true;\n        }\n        var metaBuffer = Buffer.from(JSON.stringify(metaCopy));\n        yield _cacache.default.put(this.options.cacheDirectory, metaKey, metaBuffer);\n        var cachedData = yield this.get(key);\n        return cachedData;\n      });\n      function set(_x2, _x3, _x4) {\n        return _set.apply(this, arguments);\n      }\n      return set;\n    }()\n  }]);\n  return FileSystemCache;\n}();\nexports.FileSystemCache = FileSystemCache;","map":{"version":3,"names":["_defineProperty","require","_slicedToArray","_asyncToGenerator","_classCallCheck","_createClass","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","_cacache","_interopRequireDefault","_stream","getBodyAndMetaKeys","key","FileSystemCache","options","value","_get","_getBodyAndMetaKeys","_getBodyAndMetaKeys2","metaKey","metaInfo","default","get","info","cacheDirectory","undefined","metaBuffer","byDigest","integrity","metaData","JSON","parse","bodyStreamIntegrity","empty","expiration","Date","now","bodyStream","Readable","from","Buffer","alloc","stream","_x","remove","_getBodyAndMetaKeys3","_getBodyAndMetaKeys4","bodyKey","Promise","all","rm","entry","_set","_this","_getBodyAndMetaKeys5","_getBodyAndMetaKeys6","metaCopy","ttl","fulfill","reject","pipe","put","on","i","err","code","stringify","cachedData","set","_x2","_x3","_x4"],"sources":["C:\\Users\\CR Laptop\\Desktop\\rn-project\\react_navigation\\node_modules\\@expo\\cli\\src\\api\\rest\\cache\\FileSystemCache.ts"],"sourcesContent":["import cacache from 'cacache';\nimport { Readable } from 'stream';\n\nfunction getBodyAndMetaKeys(key: string): [string, string] {\n  return [`${key}body`, `${key}meta`];\n}\n\nexport class FileSystemCache {\n  constructor(public options: { ttl?: number; cacheDirectory: string }) {}\n\n  async get(key: string) {\n    const [, metaKey] = getBodyAndMetaKeys(key);\n\n    const metaInfo = await cacache.get.info(this.options.cacheDirectory, metaKey);\n\n    if (!metaInfo) {\n      return undefined;\n    }\n\n    const metaBuffer = await cacache.get.byDigest(this.options.cacheDirectory, metaInfo.integrity);\n    const metaData = JSON.parse(metaBuffer);\n    const { bodyStreamIntegrity, empty, expiration } = metaData;\n\n    delete metaData.bodyStreamIntegrity;\n    delete metaData.empty;\n    delete metaData.expiration;\n\n    if (expiration && expiration < Date.now()) {\n      return undefined;\n    }\n\n    const bodyStream = empty\n      ? Readable.from(Buffer.alloc(0))\n      : cacache.get.stream.byDigest(this.options.cacheDirectory, bodyStreamIntegrity);\n\n    return {\n      bodyStream,\n      metaData,\n    };\n  }\n\n  remove(key: string) {\n    const [bodyKey, metaKey] = getBodyAndMetaKeys(key);\n\n    return Promise.all([\n      cacache.rm.entry(this.options.cacheDirectory, bodyKey),\n      cacache.rm.entry(this.options.cacheDirectory, metaKey),\n    ]);\n  }\n\n  async set(key: string, bodyStream: NodeJS.ReadStream, metaData: any) {\n    const [bodyKey, metaKey] = getBodyAndMetaKeys(key);\n    const metaCopy = { ...metaData };\n\n    if (typeof this.options.ttl === 'number') {\n      metaCopy.expiration = Date.now() + this.options.ttl;\n    }\n\n    try {\n      metaCopy.bodyStreamIntegrity = await new Promise((fulfill, reject) => {\n        bodyStream\n          .pipe(cacache.put.stream(this.options.cacheDirectory, bodyKey))\n          .on('integrity', (i) => fulfill(i))\n          .on('error', (e) => {\n            reject(e);\n          });\n      });\n    } catch (err: any) {\n      if (err.code !== 'ENODATA') {\n        throw err;\n      }\n\n      metaCopy.empty = true;\n    }\n\n    const metaBuffer = Buffer.from(JSON.stringify(metaCopy));\n    await cacache.put(this.options.cacheDirectory, metaKey, metaBuffer);\n    const cachedData = await this.get(key);\n\n    return cachedData;\n  }\n}\n"],"mappings":"AAAA;;AAAA,IAAAA,eAAA,GAAAC,OAAA;AAAA,IAAAC,cAAA,GAAAD,OAAA;AAAA,IAAAE,iBAAA,GAAAF,OAAA;AAAA,IAAAG,eAAA,GAAAH,OAAA;AAAA,IAAAI,YAAA,GAAAJ,OAAA;AAAA,SAAAK,QAAAC,CAAA,EAAAC,CAAA,QAAAC,CAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAJ,CAAA,OAAAG,MAAA,CAAAE,qBAAA,QAAAC,CAAA,GAAAH,MAAA,CAAAE,qBAAA,CAAAL,CAAA,GAAAC,CAAA,KAAAK,CAAA,GAAAA,CAAA,CAAAC,MAAA,WAAAN,CAAA,WAAAE,MAAA,CAAAK,wBAAA,CAAAR,CAAA,EAAAC,CAAA,EAAAQ,UAAA,OAAAP,CAAA,CAAAQ,IAAA,CAAAC,KAAA,CAAAT,CAAA,EAAAI,CAAA,YAAAJ,CAAA;AAAA,SAAAU,cAAAZ,CAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAY,SAAA,CAAAC,MAAA,EAAAb,CAAA,UAAAC,CAAA,WAAAW,SAAA,CAAAZ,CAAA,IAAAY,SAAA,CAAAZ,CAAA,QAAAA,CAAA,OAAAF,OAAA,CAAAI,MAAA,CAAAD,CAAA,OAAAa,OAAA,WAAAd,CAAA,IAAAR,eAAA,CAAAO,CAAA,EAAAC,CAAA,EAAAC,CAAA,CAAAD,CAAA,SAAAE,MAAA,CAAAa,yBAAA,GAAAb,MAAA,CAAAc,gBAAA,CAAAjB,CAAA,EAAAG,MAAA,CAAAa,yBAAA,CAAAd,CAAA,KAAAH,OAAA,CAAAI,MAAA,CAAAD,CAAA,GAAAa,OAAA,WAAAd,CAAA,IAAAE,MAAA,CAAAe,cAAA,CAAAlB,CAAA,EAAAC,CAAA,EAAAE,MAAA,CAAAK,wBAAA,CAAAN,CAAA,EAAAD,CAAA,iBAAAD,CAAA;;;;AAAoB,IAAAmB,QAAS,GAAAC,sBAAA,CAAA1B,OAAA,CAAT,SAAS;AACJ,IAAA2B,OAAQ,GAAA3B,OAAA,CAAR,QAAQ;;;;;;AAEjC,SAAS4B,kBAAkBA,CAACC,GAAW,EAAoB;EACzD,OAAO,CAAE,GAAEA,GAAI,MAAK,EAAG,GAAEA,GAAI,MAAK,CAAC;;AACpC,IAEYC,eAAe;EAC1B,SAAAA,gBAAmBC,OAAiD,EAAE;IAAA5B,eAAA,OAAA2B,eAAA;SAAnDC,OAAiD,GAAjDA,OAAiD;;EAAI3B,YAAA,CAAA0B,eAAA;IAAAD,GAAA;IAAAG,KAAA;MAAA,IAAAC,IAAA,GAAA/B,iBAAA,CAExE,WAAU2B,GAAW,EAAE;QACrB,IAAAK,mBAAA,GAAoBN,kBAAkB,CAACC,GAAG,CAAC;UAAAM,oBAAA,GAAAlC,cAAA,CAAAiC,mBAAA;UAAlCE,OAAO,GAAAD,oBAAA;QAEhB,IAAME,QAAQ,SAASZ,QAAO,CAAAa,OAAA,CAACC,GAAG,CAACC,IAAI,CAAC,IAAI,CAACT,OAAO,CAACU,cAAc,EAAEL,OAAO,CAAC;QAE7E,IAAI,CAACC,QAAQ,EAAE;UACb,OAAOK,SAAS;;QAGlB,IAAMC,UAAU,SAASlB,QAAO,CAAAa,OAAA,CAACC,GAAG,CAACK,QAAQ,CAAC,IAAI,CAACb,OAAO,CAACU,cAAc,EAAEJ,QAAQ,CAACQ,SAAS,CAAC;QAC9F,IAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC;QACvC,IAAQM,mBAAmB,GAAwBH,QAAQ,CAAnDG,mBAAmB;UAAEC,KAAK,GAAiBJ,QAAQ,CAA9BI,KAAK;UAAEC,UAAU,GAAKL,QAAQ,CAAvBK,UAAU;QAE9C,OAAOL,QAAQ,CAACG,mBAAmB;QACnC,OAAOH,QAAQ,CAACI,KAAK;QACrB,OAAOJ,QAAQ,CAACK,UAAU;QAE1B,IAAIA,UAAU,IAAIA,UAAU,GAAGC,IAAI,CAACC,GAAG,EAAE,EAAE;UACzC,OAAOX,SAAS;;QAGlB,IAAMY,UAAU,GAAGJ,KAAK,GACpBvB,OAAQ,CAAA4B,QAAA,CAACC,IAAI,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,GAC9BjC,QAAO,CAAAa,OAAA,CAACC,GAAG,CAACoB,MAAM,CAACf,QAAQ,CAAC,IAAI,CAACb,OAAO,CAACU,cAAc,EAAEQ,mBAAmB,CAAC;QAEjF,OAAO;UACLK,UAAU,EAAVA,UAAU;UACVR,QAAQ,EAARA;SACD;OACF;MAAA,SAAAP,IAAAqB,EAAA;QAAA,OAAA3B,IAAA,CAAAhB,KAAA,OAAAE,SAAA;MAAA;MAAA,OAAAoB,GAAA;IAAA;EAAA;IAAAV,GAAA;IAAAG,KAAA,EAED,SAAA6B,OAAOhC,GAAW,EAAE;MAClB,IAAAiC,oBAAA,GAA2BlC,kBAAkB,CAACC,GAAG,CAAC;QAAAkC,oBAAA,GAAA9D,cAAA,CAAA6D,oBAAA;QAA3CE,OAAO,GAAAD,oBAAA;QAAE3B,OAAO,GAAA2B,oBAAA;MAEvB,OAAOE,OAAO,CAACC,GAAG,CAAC,CACjBzC,QAAO,CAAAa,OAAA,CAAC6B,EAAE,CAACC,KAAK,CAAC,IAAI,CAACrC,OAAO,CAACU,cAAc,EAAEuB,OAAO,CAAC,EACtDvC,QAAO,CAAAa,OAAA,CAAC6B,EAAE,CAACC,KAAK,CAAC,IAAI,CAACrC,OAAO,CAACU,cAAc,EAAEL,OAAO,CAAC,CACvD,CAAC;;EACH;IAAAP,GAAA;IAAAG,KAAA;MAAA,IAAAqC,IAAA,GAAAnE,iBAAA,CAED,WAAU2B,GAAW,EAAEyB,UAA6B,EAAER,QAAa,EAAE;QAAA,IAAAwB,KAAA;QACnE,IAAAC,oBAAA,GAA2B3C,kBAAkB,CAACC,GAAG,CAAC;UAAA2C,oBAAA,GAAAvE,cAAA,CAAAsE,oBAAA;UAA3CP,OAAO,GAAAQ,oBAAA;UAAEpC,OAAO,GAAAoC,oBAAA;QACvB,IAAMC,QAAQ,GAAAvD,aAAA,KAAQ4B,QAAQ,CAAE;QAEhC,IAAI,OAAO,IAAI,CAACf,OAAO,CAAC2C,GAAG,KAAK,QAAQ,EAAE;UACxCD,QAAQ,CAACtB,UAAU,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,CAACtB,OAAO,CAAC2C,GAAG;;QAGrD,IAAI;UACFD,QAAQ,CAACxB,mBAAmB,SAAS,IAAIgB,OAAO,CAAC,UAACU,OAAO,EAAEC,MAAM,EAAK;YACpEtB,UAAU,CACPuB,IAAI,CAACpD,QAAO,CAAAa,OAAA,CAACwC,GAAG,CAACnB,MAAM,CAACW,KAAI,CAACvC,OAAO,CAACU,cAAc,EAAEuB,OAAO,CAAC,CAAC,CAC9De,EAAE,CAAC,WAAW,EAAE,UAACC,CAAC;cAAA,OAAKL,OAAO,CAACK,CAAC,CAAC;YAAA,EAAC,CAClCD,EAAE,CAAC,OAAO,EAAE,UAACzE,CAAC,EAAK;cAClBsE,MAAM,CAACtE,CAAC,CAAC;aACV,CAAC;WACL,CAAC;SACH,CAAC,OAAO2E,GAAG,EAAO;UACjB,IAAIA,GAAG,CAACC,IAAI,KAAK,SAAS,EAAE;YAC1B,MAAMD,GAAG;;UAGXR,QAAQ,CAACvB,KAAK,GAAG,IAAI;;QAGvB,IAAMP,UAAU,GAAGc,MAAM,CAACD,IAAI,CAACT,IAAI,CAACoC,SAAS,CAACV,QAAQ,CAAC,CAAC;QACxD,MAAMhD,QAAO,CAAAa,OAAA,CAACwC,GAAG,CAAC,IAAI,CAAC/C,OAAO,CAACU,cAAc,EAAEL,OAAO,EAAEO,UAAU,CAAC;QACnE,IAAMyC,UAAU,SAAS,IAAI,CAAC7C,GAAG,CAACV,GAAG,CAAC;QAEtC,OAAOuD,UAAU;OAClB;MAAA,SAAAC,IAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAnB,IAAA,CAAApD,KAAA,OAAAE,SAAA;MAAA;MAAA,OAAAkE,GAAA;IAAA;EAAA;EAAA,OAAAvD,eAAA;AAAA;QAzEUA,eAAe,GAAfA,eAAe"},"metadata":{},"sourceType":"script","externalDependencies":[]}